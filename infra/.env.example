# =============================================================================
# Production Environment Variables Template
# =============================================================================
# SECURITY NOTICE: 
# 1. Copy this file to .env in the same directory
# 2. Fill in ALL sensitive values with strong, unique credentials
# 3. NEVER commit the .env file to version control
# 4. Ensure .env has restricted permissions: chmod 600 .env
# =============================================================================

# -----------------------------------------------------------------------------
# Application Metadata
# -----------------------------------------------------------------------------
APP_VERSION=1.0.0
APP_PORT=3000

# -----------------------------------------------------------------------------
# Runtime Environment
# -----------------------------------------------------------------------------
NODE_ENV=production

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=3000
HOST=0.0.0.0

# -----------------------------------------------------------------------------
# Database Configuration - PostgreSQL
# -----------------------------------------------------------------------------
# ⚠️  CRITICAL: Use strong, unique credentials in production!
POSTGRES_DB=rrent_production
POSTGRES_USER=rrent_prod_user
POSTGRES_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD_MIN_32_CHARS

# Database URL (will be auto-constructed in docker-compose for internal network)
# For external access: postgresql://USER:PASSWORD@HOST:5432/DATABASE
DATABASE_URL=postgresql://rrent_prod_user:CHANGE_ME_TO_STRONG_PASSWORD_MIN_32_CHARS@rrent-postgres:5432/rrent_production

# Database connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# ⚠️  CRITICAL: Generate a secure random string for production!
# Example generation: openssl rand -base64 64
JWT_SECRET=CHANGE_ME_TO_SECURE_RANDOM_STRING_GENERATE_WITH_OPENSSL_RAND_BASE64_64
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# Password hashing rounds (higher = more secure but slower)
BCRYPT_ROUNDS=12

# -----------------------------------------------------------------------------
# Rate Limiting / Throttling
# -----------------------------------------------------------------------------
# Requests per time window
THROTTLE_TTL=60
THROTTLE_LIMIT=100

# Strict rate limiting for auth endpoints
AUTH_THROTTLE_TTL=900
AUTH_THROTTLE_LIMIT=5

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# ⚠️  IMPORTANT: Specify your actual frontend domain(s)
# Example: https://app.example.com
# Multiple origins: https://app.example.com,https://admin.example.com
CORS_ORIGIN=https://your-frontend-domain.com

# Allow credentials (cookies, authorization headers)
CORS_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Session & Cookies
# -----------------------------------------------------------------------------
SESSION_SECRET=CHANGE_ME_TO_ANOTHER_SECURE_RANDOM_STRING
COOKIE_SECURE=true
COOKIE_SAME_SITE=strict

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json

# Optional: External logging service
# LOG_SERVICE_URL=
# LOG_SERVICE_API_KEY=

# -----------------------------------------------------------------------------
# Email Service (SMTP)
# -----------------------------------------------------------------------------
# Configure if email notifications are enabled
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=noreply@example.com
SMTP_PASSWORD=CHANGE_ME_TO_SMTP_PASSWORD
SMTP_FROM=RRent System <noreply@example.com>

# -----------------------------------------------------------------------------
# Redis Configuration (Optional - for caching/sessions)
# -----------------------------------------------------------------------------
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_PASSWORD=CHANGE_ME_TO_REDIS_PASSWORD
# REDIS_DB=0
# REDIS_TTL=3600

# -----------------------------------------------------------------------------
# File Storage / Upload Configuration
# -----------------------------------------------------------------------------
# Local storage
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=10485760

# Optional: S3-compatible storage (AWS S3, MinIO, etc.)
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_BUCKET=rrent-production-uploads
# S3_ACCESS_KEY=CHANGE_ME
# S3_SECRET_KEY=CHANGE_ME
# S3_REGION=us-east-1

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Optional: APM/Monitoring services
# SENTRY_DSN=
# NEW_RELIC_LICENSE_KEY=
# DATADOG_API_KEY=

# Health check endpoint
HEALTH_CHECK_PATH=/health

# -----------------------------------------------------------------------------
# Application Features
# -----------------------------------------------------------------------------
# Disable development tools in production
ENABLE_SWAGGER=false
ENABLE_GRAPHQL_PLAYGROUND=false

# Feature flags
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_AUDIT_LOG=true

# -----------------------------------------------------------------------------
# Timezone & Localization
# -----------------------------------------------------------------------------
TZ=Asia/Shanghai
DEFAULT_TIMEZONE=Asia/Shanghai
DEFAULT_LOCALE=zh-CN

# -----------------------------------------------------------------------------
# Backup Configuration (Reference only - implement separately)
# -----------------------------------------------------------------------------
# See BE_8_DOCKER_COMPOSE.md for backup procedures
# BACKUP_SCHEDULE=0 2 * * *
# BACKUP_RETENTION_DAYS=30
# BACKUP_DESTINATION=/backups

# -----------------------------------------------------------------------------
# SSL/TLS Configuration (if handling certificates in container)
# -----------------------------------------------------------------------------
# SSL_CERT_PATH=/certs/cert.pem
# SSL_KEY_PATH=/certs/key.pem
# SSL_CA_PATH=/certs/ca.pem

# -----------------------------------------------------------------------------
# Third-party Integrations
# -----------------------------------------------------------------------------
# Payment gateway (if implemented)
# PAYMENT_GATEWAY_API_KEY=
# PAYMENT_GATEWAY_SECRET=
# PAYMENT_GATEWAY_WEBHOOK_SECRET=

# SMS provider (if implemented)
# SMS_PROVIDER=
# SMS_API_KEY=
# SMS_API_SECRET=

# -----------------------------------------------------------------------------
# Performance Tuning
# -----------------------------------------------------------------------------
# Node.js memory limit
NODE_OPTIONS=--max-old-space-size=1024

# Worker processes (if using cluster mode)
# WORKERS=2

# -----------------------------------------------------------------------------
# Security Headers & CSP
# -----------------------------------------------------------------------------
# Helmet.js configuration (if needed)
# CSP_DIRECTIVES=default-src 'self'

# -----------------------------------------------------------------------------
# Custom Application Settings
# -----------------------------------------------------------------------------
# Add your custom environment variables below
# CUSTOM_SETTING_1=value1
# CUSTOM_SETTING_2=value2
